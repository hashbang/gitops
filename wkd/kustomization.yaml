apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: wkd
resources:
  - github.com/drGrove/docker-wkd/kustomize/advanced?ref=9e0721ef88ed33aac78533bbb5e21f7d9a0c69cd
  - ingress.yaml
patches:
  - target:
      kind: Deployment
      name: wkd
    patch: |-
      - op: add
        path: "/spec/template/spec/containers/0/args/-"
        value: "-m"
      - op: add
        path: "/spec/template/spec/containers/0/args/-"
        value: "hashbang.sh"
images:
  - name: drgrove/wkd
    newTag: v2.2.2@sha256:b00e9e42486efa6e8601f4aff3d61c9417dcaba993411905a4b63cd2dee72f42
  - name: kiwigrid/k8s-sidecar
    newTag: 1.22.2@sha256:ccbf350872e8a60a8b1fac8f53e22272546673455a7aaee84be19ac02e2fad58
configMapGenerator:
  - name: benharri-key
    options:
      labels:
        wkd: 'enroll'
    files:
      - files/benharri.asc
  - name: dannygrove-key
    options:
      labels:
        wkd: 'enroll'
    files:
      - files/dannygrove.asc
  - name: lrvick-key
    options:
      labels:
        wkd: 'enroll'
    files:
      - files/lrvick.asc
  - name: ryan-key
    options:
      labels:
        wkd: 'enroll'
    files:
      - files/ryan.asc
